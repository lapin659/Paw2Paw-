<!DOCTYPE html>
<html lang = en xmlns:th="http://www.thymeleaf.org"  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorator="layout/outline">
<head>
    <title>Community</title>
    <link th:rel="stylesheet" th:href="@{assets/bootstrap-slider/css/bootstrap-slider.css}"/>
    <link th:rel="stylesheet" th:href="@{webjars/bootstrap/5.1.3/css/bootstrap.min-jsf.css} "/>
    <link th:rel="stylesheet" th:href="@{webjars/font-awesome/6.1.0/css/all.css} "/>
    <script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css" />

    <title th:text="${topic.getTitle()} + '| JF'">Topic's title | JF</title>
    <!--- temp for testing
    <p class="col s12" style="text-align: justify; display:block; white-space:pre-wrap"
       th:text="${topic.getContent()}">Topic's content</p>
     -->
</head>
<body>
<div class="container text-center">
</div>
    <div xmlns:th="http://www.thymeleaf.org">
        <nav class="navbar navbar-light bg-light" style="background-color:#e68534;">
            <a class="navbar-brand" href="homepage.html" style="color:#e68534;">Home</a>
            <a class="navbar-brand" th:href= "@{/forum.html}" style="color:#e68534;">Community</a>
            <a class="navbar-brand" th:href="@{/user_profile}" style="color:#e68534;"
                   th:text="${topic.getUser().getUsername()}">My Account</a>
        </nav>
            <!--
            <h3 style="color:#e68534;">Order History</h3>
            <form th:action="@{/order}" th:object="${myOrders}">
            -->
            <form th:action="@{/user_profile}"  method="post">
                        <header class="row">
                            <h5 class="flow-text left" style="color:#e68534;" th:text="${topic.getTitle()}">Topic's Title</h5>
                        </header>
                        <section class="row">
                            <div class="col s12">
                                <a th:href= "@{/user_profile}">
                                    <!--
                                <button type="button" class="btn btn-outline-warning"
                                -->
                                    <span class="chip left"
                                    th:text="${topic.getUser().getUsername()}"> Username
                                    </span>
                                </a>
                                <span class="right" th:text="${topic.showTimestamp()}"> timestamp </span>
                            </div>
                        </section>
                <section class="row">
                    <p class ="col s12" style="text-align: justify; display:block; white-space:pre-wrap"
                       th:text= "${topic.getContent()}">Content</p>
                </section>

                <!-- ANSWER -->
                <header class="row">
                    <div class="col s12">
                        <blockquote class="flow-text left" th:text="|Replies: | + ${replies.size()}">Number of answers</blockquote>
                    </div>
                </header>

                <section class="row">
                    <div class="col s12" th:each="reply : ${replies}">
                        <a th:href="@{/user_profile}">
                        <span class="chip left" style="background-color: #f3f2f2;" th:text="${reply.getUser().getUsername()}">
                            Answer's author
                        </span>
                        </a>
                        <span class="right" th:text="${reply.getTimeStamp()}"></span>
                        <span th:if="${topic.getUser().getUsername() == userName}">
                        <form th:action="@{/newTopic/{topic.getId()}}" method="post">
                            <input type="hidden" name="id_answer" th:value="${reply.getId()}"/>
                            <input type="hidden" name="id_topic" th:value="${topic.getId()}"/>
                            <button class="chip left" style="background-color: #37b7ab;">Set useful/useless</button>
                        </form>
                    </span>
                        <span th:if="${reply.getUser().getUsername() == userName}">
                        <form th:action="@{/newTopic/{topic.getId()}}" method="post">
                            <input type="hidden" name="id_answer" th:value="${reply.getId()}"/>
                            <input type="hidden" name="action" th:value="delete"/>
                            <input type="hidden" name="id_topic" th:value="${topic.getId()}"/>
                            <button class="chip left" style="background-color: #37b7ab;">Delete</button>
                        </form>
                    </span>
                        <div class="row">
                            <p class="col s12" style="text-align: justify; display:block; white-space:pre-wrap"
                               th:text="${reply.getContent()}">
                                Answer's content
                            </p>
                        </div>
                    </div>
                </section>













            </form>


        <!--
        <form th:action="@{/newTopic}" th:object="${topic}" method="post"  >
        <input type="hidden" name="id_topic" th:value="${topic.getTitle()}"/>
        <input type="hidden" name="id_content" th:value="${topic.getContent()}"/>
        </form>
    -->


</div>

</body>
</html>